<html>
  <head></head>
  <script>
    window.addEventListener("message", function (message) {
      if (message.data.data.type === "init") {
        alert("init")
        const addToCart = document.querySelector(".add-to-cart");
        addToCart.style.background = message.data.data.theming.primaryColor;
        addToCart.innerHTML = message.data.data.config.button;
      } else {
        const getPre = document.querySelector('.integrated-pre');
        getPre.innerHTML = JSON.stringify(message.data);
      }
    });
    function clicked() {
      const data = {
        event: "xr_add_to_cart",
        customEventName: "true",
        data: {
          products: {
            name: "Loreal paris cream",
            product_id: 1,
            type: "cream",
            isAvailable: false,
          },
        },
      };
      emitEvent(data);
      listenToEvent(data.event);
    }
  </script>
  <body>
    <button
      style="height: 60px; width: 150px; font-size: 15px"
      class="add-to-cart"
      style="cursor: pointer"
      onclick="clicked()"
    >
      add to cart
    </button>
    <div>
      <pre style="font-size: 18px;" class="integrated-pre"></pre>
    </div>
  </body>
</html>
